!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.imagePreview=n():t.imagePreview=n()}(window,(function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(n){return t[n]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){},function(t,n,e){"use strict";e.r(n);e(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){return"function"==typeof t},r=function(t,n,e){if(t&&i(n))if(Array.isArray(t)||t.length)for(var r=t.length,c=e=e||0;c<r&&!1!==n.call(t,t[c],c,t);c++);else(function(t){return"object"===o(t)&&null!==t})(t)&&Object.keys(t).forEach((function(e){n.call(t,e,t[e],t)}))},c=function(t){return[Object,Array].indexOf(("number"==typeof t?t:t||{}).constructor)>-1&&!Object.keys(t||{}).length},a=r,s=function(){var t=arguments[0];return r(arguments,(function(n){Object.keys(n).forEach((function(e){t[e]=n[e]}))}),1),t},u=function(t,n){return function(){return t.apply(n,arguments)}},l=function(t){return 0==t.indexOf("#")?document.getElementById(t.slice(1)):document.querySelector(t)},f=function t(n,e){return n.length?(a(n,(function(n){t(n,e)})),n):(n.classList.add(e),n)},h=function(t,n,e){void 0===e&&(e=!t.classList.contains(n)),e?f(t,n):function t(n,e){return n.length?(a(n,(function(n){t(n,e)})),n):(n.classList.remove(e),n)}(t,n)},d=function(t,n,e){return t.length?(Array.prototype.forEach.call(t,(function(t){t.addEventListener(n,e)})),{destory:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(n,e)}))}}):(t.addEventListener(n,e),{destory:function(){t.removeEventListener(n,e)}})};function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m={show:function(t){if(!this.showing){this.mounted&&l("#".concat(this.id))||this._mount();var n=function(t,n){var e={};return"string"==typeof n?e.list=[{url:n}]:n instanceof Array?e.list=n:"object"===y(n)&&null!==n&&(e=n),s({},t,e)}(this.setting,t);if(!c(n.list))return this.list=n.list||[],this.currentIndex=n.index||0,this._loadImg(),this.showing=!0,this}},close:function(){return this.showing=!1,this.loading=!1,this},prev:function(){this.currentIndex=this.setting.loop?0===this.currentIndex?this.list.length-1:this.currentIndex-1:Math.max(this.currentIndex,0),this._loadImg()},next:function(){this.currentIndex=this.setting.loop?(this.currentIndex+1)%this.list.length:Math.min(this.currentIndex,this.list.length),this._loadImg()},destory:function(){var t=this;Object.keys(this.listener).forEach((function(n){var e=t.listener[n];e.destory&&e.destory()}))},_loadImg:function(){var t=this;this.loadingTimer=setTimeout((function(){t.loading=!0}),400),this.imgElement.style="display: none;",this.imgElement.src=(this.list[this.currentIndex]||{}).url}},p={_initEvent:function(){var t=this,n={};n.prevButton=d(this.toolbar.querySelector("li[data-action=left]"),"click",u(this.prev,this)),n.nextButton=d(this.toolbar.querySelector("li[data-action=right]"),"click",u(this.next,this)),n.closeButton=d(this.corner,"click",u(this.close,this)),n.loadImg=d(this.board.querySelector("img"),"load",(function(n){var e=n.target,o=function(t,n,e,o){if(console.log(t,n),console.log(e,o),t>e||n>o){var i=t/n;n>o?(n=o,t=Math.floor(n*i)):(t=e,n=Math.floor(t/i))}return{width:t,height:n}}(e.width,e.height,t.maxWidth,t.maxHeight),i=o.width,r=o.height;!function(t,n){t.style=Object.keys(n).reduce((function(t,e){return t+="".concat(e,":").concat(n[e],";")}),"")}(e,{"margin-left":"-".concat(i/2,"px"),"margin-top":"-".concat(r/2,"px"),width:"".concat(i,"px"),height:"".concat(r,"px"),animation:"zoomIn .3s"}),t.loadingTimer&&clearTimeout(t.loadingTimer),t.loading=!1})),this.listener=n}},g=function(){},v={mount:document.body,loop:!0,label:function(t){return t.name},showLabel:!1,showToolBar:!0,showToolBarAnimation:!1,lockScroll:!0,onShow:g,onChange:g,onClose:g},b="easy-previewer",x="".concat(b,"--visible"),_="".concat(b,"--hide"),w="".concat(b,"--loading"),S="".concat(b,"__corner"),j="".concat(b,"__indicator"),E="".concat(b,"__board"),O="".concat(b,"__footer"),I="".concat(b,"__btn-close"),k="".concat(b,"__toolbar"),T='\n  <div class="'.concat(S,'">\n    <span class="').concat(I,'" role="button">×</span>\n  </div>\n  <div class="').concat(j,'"></div>\n  <div class="').concat(E,'">\n    <img />\n  </div>\n  <div class="').concat(O,'">\n    <ul class="').concat(k,'">\n      <li data-action="left" class="easy-previewer__tool-item">←</li>\n      <li data-action="right" class="easy-previewer__tool-item">→</li>\n    </ul>\n  </div>\n');function M(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var q=1,L=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="__".concat(b).concat(q++),this.mounted=!1,this.currentIndex=0,this.list=[],this.setting=s(v,n||{}),this.loadingTimer=null,this._initRatio(),this._initWatcher()}var n,e,o;return n=t,(e=[{key:"_mount",value:function(){var t=document.createElement("div");t.id=this.id,t.innerHTML=T,f(t,"".concat(b)),f(t,"".concat(x)),this.root=t,this.corner=t.querySelector(".".concat(S)),this.indicator=t.querySelector(".".concat(j)),this.board=t.querySelector(".".concat(E)),this.imgElement=this.board.querySelector("img"),this.footer=t.querySelector(".".concat(O)),this.toolbar=t.querySelector(".".concat(k));var n=this.setting.mount;"string"==typeof n&&(this.setting.mount=l(n)),this.setting.mount.appendChild(t),this.mounted=!0,this._initEvent()}},{key:"_initRatio",value:function(){this.maxWidth=Math.floor(.8*document.documentElement.clientWidth),this.maxHeight=Math.floor(.8*document.documentElement.clientHeight),this.screenRatio=this.maxWidth/this.maxHeight}},{key:"_initWatcher",value:function(){var t=this,n={showing:!1,loading:!1},e={showing:function(t){h(this.root,_,!t),h(this.root,x,t)},loading:function(t){h(this.root,w,t)}};Object.keys(e).forEach((function(o){var i=n[o];Object.defineProperty(t,o,{configurable:!0,enumerable:!0,get:function(){return i},set:function(t){n[o]=t,e[o].call(this,t)}})}))}}])&&M(n.prototype,e),o&&M(n,o),t}();s(L.prototype,p,m);var P=L;function A(t){var n=new P(t);return u(P.prototype.show,n)}var B=A({});B.create=A;var W=B;e.d(n,"default",(function(){return W}))}])}));